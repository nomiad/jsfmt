/**
 * This Utility knows various formats
 * @author nomiad | guavestudios
 * @license MIT -> LICENSE
 * @version 0.3
 */(function(e){var t=function n(){function o(e){var t=arguments;try{var o=t[0];if(t[n.PLP_PARAMS]==undefined||t[n.PLP_PARAMS]==n.EMPTY)o=u.call(this,t).toString();else{var a=t[n.PLP_PARAMS].charAt(0),f=s[a];f!=null&&(o=f.call(this,t[n.PLP_PARAMS],u.call(this,t)))}if(t[n.PLP_ASSIGN]!=undefined&&t[n.PLP_ASSIGN]!=n.EMPTY)return i||(r={},i=!0),r[t[n.PLP_ASSIGN]]=o,""}catch(l){o=t[0],window.console!=null&&console.warn("Format problem: '"+t[0]+"' in '"+t[7].substr(0,16)+"...'")}return o}function u(e){if(e[n.PLP_SUBSELECT]!=n.EMPTY){var s;return e[n.PLP_SELECT]!=n.EMPTY?s=t[parseInt(e[n.PLP_SELECT],10)]:s=t[0],s[e[n.PLP_SUBSELECT]]}return e[n.PLP_SELECTVAR]!=undefined&&e[n.PLP_SELECTVAR]!=n.EMPTY?i?r[e[n.PLP_SELECTVAR]]:"NA":t[parseInt(e[n.PLP_SELECT],10)]}function a(e,t){return t.toString(16).toUpperCase()}function f(e,t){var r=n.parseIfReg.exec(e);if(r!=null){var i=parseFloat(r[2]),s=!1;switch(r[1]){case"!=":s=t!=i;break;case"<":s=t<i;break;case">":s=t>i;break;case"==":s=t==i}return s?r[3]:r[4]}return e}function l(e,t){var r=n.formatNumberReg.exec(e),i=t;if(isNaN(i))return e;if(r!=null){var s=0,o=0,u=i;r[3]!=null&&(s=r[4].length,o=r[4].charAt(0)=="?"?0:s),u*=Math.pow(10,s),r[5]=="c"?u=Math.ceil(u):r[5]=="f"?u=Math.floor(u):u=Math.round(u),u/=Math.pow(10,s);var a=u.toString(),f="";if(a.indexOf(".")>-1&&s>0){var l=u.toString().split(".");f=l[1],a=l[0]}if(o>0)while(f.length<o)f+="0";var c=r[2].length;while(a.length<c)a="0"+a;if(r[1]!=null){var h="";for(var p=a.length-1,d=a.length-1;p>=0;p--)h=a.charAt(p)+h,(d-p)%3==2&&p>0&&(h=r[1]+h);a=h}return f.length>0?a+r[3]+f:a}return e}function c(e,t){var r=n.parseTabsReg.exec(e);if(r!=null){var i=t.toString(),s=r[1],o=r[3],u=parseInt(r[2],10),a=0;while(i.length<u)switch(s){case"m":a%2==0?i+=o:i=o+i,a++;break;case"l":i+=o;break;case"r":default:i=o+i}return i}return t}var e=this,t=null,r,i=!1,s={d:l,h:a,"?":f,s:c};this.format=function(s,u){t=Array.prototype.slice.call(arguments,1);if(s==null)return"Error: undefined Format";if(arguments.length<2)return s;if(s.indexOf("{")==-1)return s;var a=s.replace(n.placeholderPattern,function(){return o.apply(e,arguments)});return i&&(i=!1,r=null),a}};t.placeholderPattern=/\{(?:\$([a-zA-Z0-9]{1,4})=|)(\$([a-zA-Z0-9]{1,4})|[0-9]{1,2}|)(?:\.|)(?:#|)([a-zA-Z0-9]{1,15}?|)(?:\:(.+?)|)\}/g,t.parseIfReg=/^\?(.{1,2})([0-9]{1,5})\|(.*?)\|(.*?)$/,t.formatNumberReg=/^d(?:(\.|\,|\')|)([#]{1,5})(?:(\.|\,)([#\?]{1,4})|)([cfr]|)$/,t.parseTabsReg=/^s([l,r,m])([0-9]{1,2})\|(.)/,t.EMPTY="",t.PLP_ASSIGN=1,t.PLP_SELECT=2,t.PLP_SELECTVAR=3,t.PLP_SUBSELECT=4,t.PLP_PARAMS=5,t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.format=function(e,n){return t.getInstance().format.apply(t.getInstance(),arguments)},e.Format=t,typeof define=="function"&&define.amd&&define("jsfmt",[],function(){return t})})(window);