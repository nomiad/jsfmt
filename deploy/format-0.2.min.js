/**
 * This Utility knows various formats
 * @author nomiad | guavestudios
 * @license MIT -> LICENSE
 * @version 0.3
 */(function(e){var t=function n(){function u(e){s[e.id]=e.fnc,e.init&&e.init(this)}function a(e){var t=arguments;try{var n=t[0];if(t[o.PLP_PARAMS]==undefined||t[o.PLP_PARAMS]==o.EMPTY)n=f.call(this,t).toString();else{var u=t[o.PLP_PARAMS].charAt(0),a=s[u];a!=null&&(n=a.call(this,t[o.PLP_PARAMS],f.call(this,t)))}if(t[o.PLP_ASSIGN]!=undefined&&t[o.PLP_ASSIGN]!=o.EMPTY)return i||(r={},i=!0),r[t[o.PLP_ASSIGN]]=n,""}catch(l){n=t[0],window.console!=null&&console.warn("Format problem: '"+t[0]+"' in '"+t[7].substr(0,16)+"...'")}return n}function f(e){if(e[o.PLP_SUBSELECT]!=o.EMPTY){var n;return e[o.PLP_SELECT]!=o.EMPTY?n=t[parseInt(e[o.PLP_SELECT],10)]:n=t[0],l(n,e[o.PLP_SUBSELECT].split("."),0)}return e[o.PLP_SELECTVAR]!=undefined&&e[o.PLP_SELECTVAR]!=o.EMPTY?i?r[e[o.PLP_SELECTVAR]]:"NA":t[parseInt(e[o.PLP_SELECT],10)]}function l(e,t,n){n==null&&(n=0);var r=t[n];return r==null?e:l(e[r],t,n+1)}function c(e,t){return t.toString(16).toUpperCase()}function h(e,t){var n=o.parseIfReg.exec(e);if(n!=null){var r=parseFloat(n[2]),i=!1;switch(n[1]){case"!=":i=t!=r;break;case"<":i=t<r;break;case">":i=t>r;break;case"==":i=t==r}return i?n[3]:n[4]}return e}function p(e,t){var n=o.formatNumberReg.exec(e),r=t;if(isNaN(r))return e;if(n!=null){var i=0,s=0,u=r;n[3]!=null&&(i=n[4].length,s=n[4].charAt(0)=="?"?0:i),u*=Math.pow(10,i),n[5]=="c"?u=Math.ceil(u):n[5]=="f"?u=Math.floor(u):u=Math.round(u),u/=Math.pow(10,i);var a=u.toString(),f="";if(a.indexOf(".")>-1&&i>0){var l=u.toString().split(".");f=l[1],a=l[0]}if(s>0)while(f.length<s)f+="0";var c=n[2].length;while(a.length<c)a="0"+a;if(n[1]!=null){var h="";for(var p=a.length-1,d=a.length-1;p>=0;p--)h=a.charAt(p)+h,(d-p)%3==2&&p>0&&(h=n[1]+h);a=h}return f.length>0?a+n[3]+f:a}return e}function d(e,t){var n=o.parseTabsReg.exec(e);if(n!=null){var r=t.toString(),i=n[1],s=n[3],u=parseInt(n[2],10),a=0;while(r.length<u)switch(i){case"m":a%2==0?r+=s:r=s+r,a++;break;case"l":r+=s;break;case"r":default:r=s+r}return r}return t}var e=this,t=null,r,i=!1,s={d:p,h:c,"?":h,s:d},o=n.defaultFormat;this.format=function(n,s){t=Array.prototype.slice.call(arguments,1);if(n==null)return"Error: undefined Format";if(arguments.length<2)return n;if(n.indexOf(o.placeholderIndexOfCheck)==-1)return n;var u=n.replace(o.placeholderPattern,function(){return a.apply(e,arguments)});return i&&(i=!1,r=null),u},this.getValue=f,this.addPlugin=u};t.defaultFormat={placeholderIndexOfCheck:"{",placeholderPattern:/\{(?:\$([a-zA-Z0-9]{1,4})=|)(\$([a-zA-Z0-9]{1,4})|[0-9]{1,2}|)(?:\.|)(?:#|)([a-zA-Z0-9\.]{1,60}?|)(?:\:(.+?)|)\}/g,parseIfReg:/^\?(.{1,2})([0-9]{1,5})\|(.*?)\|(.*?)$/,formatNumberReg:/^d(?:(\.|\,|\')|)([#]{1,5})(?:(\.|\,)([#\?]{1,4})|)([cfr]|)$/,parseTabsReg:/^s([l,r,m])([0-9]{1,2})\|(.)/,EMPTY:"",PLP_ASSIGN:1,PLP_SELECT:2,PLP_SELECTVAR:3,PLP_SUBSELECT:4,PLP_PARAMS:5},t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.format=function(e,n){return t.getInstance().format.apply(t.getInstance(),arguments)},e.Format=t,typeof define=="function"&&define.amd&&define("jsfmt",[],function(){return t})})(window);